<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel - Marienne Exquisite Stitches</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(135deg, #0d0d0d, #1a1a1a);
    color: #f5f5f5;
    padding: 20px;
}

/* PIN Section */
#pin-section {
    max-width: 400px;
    margin: 100px auto;
    text-align: center;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(212,175,55,0.3);
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 0 25px rgba(212,175,55,0.4);
}
#pin-section h2 {
    font-family: 'Cormorant Garamond', serif;
    color: #d4af37;
    margin-bottom: 20px;
}
#pin-input {
    padding: 12px;
    width: 70%;
    border-radius: 8px;
    border: 1px solid #d4af37;
    background: #111;
    color: #d4af37;
}
#pin-btn {
    padding: 12px 18px;
    margin-left: 8px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(90deg, #d4af37, #b8860b);
    color: #000;
    cursor: pointer;
    font-weight: bold;
}
#pin-btn:hover {
    background: linear-gradient(90deg, #ffd700, #d4af37);
}
#pin-msg {
    margin-top: 15px;
    color: #ff4c4c;
}

/* Admin Content */
#admin-content {
    display:none;
}
h1 {
    text-align:center;
    font-family: 'Cormorant Garamond', serif;
    color:#d4af37;
    margin-bottom:30px;
    text-shadow:0 0 20px rgba(212,175,55,0.6);
}
.top-actions {
    display:flex;
    justify-content:space-between;
    margin-bottom:20px;
    flex-wrap: wrap;
    gap: 10px;
}
.back-btn {
    background:#111;
    color:#d4af37;
    text-decoration:none;
    padding:10px 16px;
    border-radius:8px;
    border:1px solid #d4af37;
    transition:0.3s;
}
.back-btn:hover {
    background:#d4af37;
    color:#000;
}
.clear-btn {
    background:#b71c1c;
    color:white;
    padding:10px 16px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}
.clear-btn:hover {
    background:#ff4c4c;
}
.download-btn {
    background: linear-gradient(90deg, #d4af37, #b8860b);
    color: #000;
    padding: 10px 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s ease, transform 0.2s ease;
}
.download-btn:hover {
    background: linear-gradient(90deg, #ffd700, #d4af37);
    transform: scale(1.05);
}
.print-btn {
    background: linear-gradient(90deg, #25D366, #128C7E);
    color: #fff;
    padding: 10px 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s ease, transform 0.2s ease;
}
.print-btn:hover {
    background: linear-gradient(90deg, #34D058, #25D366);
    transform: scale(1.05);
}

/* Orders Table */
table {
    width:100%;
    border-collapse:collapse;
    background:rgba(255,255,255,0.05);
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 0 20px rgba(212,175,55,0.3);
}
th,td {
    padding:12px;
    border-bottom:1px solid rgba(212,175,55,0.2);
    text-align:left;
    vertical-align:top;
}
th {
    background:#111;
    color:#d4af37;
    font-family:'Cormorant Garamond', serif;
}
tr:hover {
    background:rgba(212,175,55,0.1);
}
small {
    color:#aaa;
}

/* Footer */
footer {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(12px);
  border-top: 1px solid rgba(212,175,55,0.3);
  padding: 30px;
  margin-top: 50px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px,1fr));
  gap: 30px;
  color: #f5f5f5;
}
footer h3 {
  font-family: 'Cormorant Garamond', serif;
  color: #d4af37;
  margin-bottom: 12px;
}
footer a {
  color: #ffd700;
  text-decoration: none;
}
footer a:hover {
  text-decoration: underline;
}

/* Floating WhatsApp Button */
.whatsapp-float {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #25D366;
  color: #fff;
  padding: 12px 18px;
  border-radius: 30px;
  font-weight: bold;
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
  transition: transform 0.3s ease;
}
.whatsapp-float:hover {
  transform: scale(1.05);
}
</style>
</head>
<body>

<div id="pin-section">
<h2>Enter Admin PIN</h2>
<input type="password" id="pin-input" placeholder="Enter PIN">
<button id="pin-btn">Submit</button>
<p id="pin-msg"></p>
</div>

<div id="admin-content">
<h1>Admin Panel â€“ Marienne Exquisite Stitches</h1>
<div class="top-actions">
<a href="index.html" class="back-btn">â¬… Back to Store</a>
<button class="clear-btn" onclick="clearOrders()">Clear All Orders</button>
<button class="download-btn" onclick="downloadOrders()">â¬‡ Download Orders</button>
<button class="print-btn" onclick="printOrders()">ðŸ–¨ Print Orders</button>
</div>

<section>
<h2 style="color:#ffd700;">Customer Orders</h2>
<table id="orders-table">
<thead>
<tr>
<th>Date</th>
<th>Customer</th>
<th>Items Ordered</th>
<th>Total (â‚¦)</th>
<th>Shipment</th>
</tr>
</thead>
<tbody></tbody>
</table>
<p><small>Orders are saved locally (offline mode).</small></p>
</section>
</div>

<!-- Footer -->
<footer>
  <div class="footer-section">
    <h3>Connect With Us</h3>
    <p>Instagram: 
      <a href="https://instagram.com/royalintschools2000" target="_blank">@royalintschools2000</a>
    </p>
    <p>Email: <a href="mailto:bibasule61@gmail.com">bibasule61@gmail.com</a></p>
    <p>Phone/WhatsApp: +2348034045437 / +2348056228857</p>
  </div>

  <div class="footer-section">
    <h3>Payment Details</h3>
    <p><strong>Bank Name:</strong> GT Bank</p>
    <p><strong>Account Name:</strong> Habiba A. Suleiman</p>
    <p><strong>Account Number:</strong> 0052447920</p>
  </div>

  <div class="footer-section portfolio">
    <p>Curated by <strong>RoyalTechSolutions</strong></p>
    <a href="https://royaltechsolutions.netlify.app" target="_blank">Explore Portfolio</a>
  </div>
</footer>
<!-- Floating WhatsApp Button -->
<a href="https://wa.me/2348034045437" class="whatsapp-float" target="_blank">
  ðŸ’¬ Chat on WhatsApp
</a>

<script>
const ADMIN_PIN = "1234";

document.getElementById("pin-btn").addEventListener("click",()=>{
    const pin=document.getElementById("pin-input").value;
    if(pin===ADMIN_PIN){
        document.getElementById("pin-section").style.display="none";
        document.getElementById("admin-content").style.display="block";
        loadOrders();
    } else {
        document.getElementById("pin-msg").innerText="Access Denied. Wrong PIN!";
    }
});

function loadOrders(){
    const orders=JSON.parse(localStorage.getItem("orders") || "[]");
    const products=JSON.parse(localStorage.getItem("products") || "[]");
    const tbody=document.querySelector("#orders-table tbody");
    tbody.innerHTML="";
    if(orders.length===0){
        tbody.innerHTML="<tr><td colspan='5'>No orders yet.</td></tr>";
        return;
    }
    orders.forEach(order=>{
        let itemsText="",total=0;
        order.items.forEach((it,index)=>{
            const product=products.find(p=>p.id===it.id);
            if(product){
                const subtotal=product.price*it.qty;
                total+=subtotal;
                itemsText+=`${index+1}) ${it.qty} Ã— ${product.name} (â‚¦${product.price} each) â†’ â‚¦${subtotal}<br>`;
            }
        });
        const tr=document.createElement("tr");
        tr.innerHTML=`
          <td>${order.date}</td>
          <td>${order.customer || "N/A"}</td>
          <td>
            <div style="line-height:1.6;">
              ðŸ§¾ <strong>Order Summary</strong><br>
              ${itemsText}
              <hr style="border:0;border-top:1px solid rgba(212,175,55,0.3);margin:6px 0;">
              ðŸ’° <strong>Total:</strong> â‚¦${total}
            </div>
          </td>
          <td>â‚¦${total}</td>
          <td>${order.shipment || "N/A"}</td>
        `;
        tbody.appendChild(tr);
    });
}

function clearOrders(){
    if(confirm("Are you sure you want to clear ALL orders?")){
        localStorage.removeItem("orders");
        loadOrders();
    }
}

function downloadOrders(){
    const orders = JSON.parse(localStorage.getItem("orders") || "[]");
    const products = JSON.parse(localStorage.getItem("products") || "[]");

    if(orders.length === 0){
        alert("No orders to download.");
        return;
    }

    let csv = "Date,Customer,Items Ordered,Total,Shipment\n";

    orders.forEach(order=>{
        let itemsText = "";
        let total = 0;
        order.items.forEach(it=>{
            const product = products.find(p=>p.id===it.id);
            if(product){
                const subtotal = product.price * it.qty;
                total += subtotal;
                itemsText += `${it.qty} Ã— ${product.name} (â‚¦${product.price} each) â†’ â‚¦${subtotal}; `;
            }
        });
        csv += `"${order.date}","${order.customer || "N/A"}","${itemsText}","â‚¦${total}","${order.shipment || "N/A"}"\n`;
    });

    const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "orders.csv";
    link.click();
}

function printOrders(){
    const ordersTable = document.getElementById("orders-table").outerHTML;
    const win = window.open("", "", "width=900,height=600");
    win.document.write(`
        <html>
        <head>
          <title>Orders - Marienne Exquisite Stitches</title>
          <style>
            body { font-family: 'Montserrat', sans-serif; padding: 20px; }
            h2 { font-family: 'Cormorant Garamond', serif; color: #d4af37; }
            table { width:100%; border-collapse:collapse; margin-top:20px; }
            th, td { border:1px solid #ccc; padding:8px; text-align:left; }
            th { background:#f5f5f5; color:#333; }
          </style>
        </head>
        <body>
          <h2>Orders â€“ Marienne Exquisite Stitches</h2>
          ${ordersTable}
          <p style="margin-top:20px;font-size:14px;">
            Bank: GT Bank | Account Name: Habiba A. Suleiman | Account Number: 0052447920<br>
            Contact: +2348034045437 / +2348056228857 | Email: bibasule61@gmail.com
          </p>
        </body>
        </html>
    `);
    win.document.close();
    win.print();
}
</script>

</body>
</html>

